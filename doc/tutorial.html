<h1><tt>yacite</tt> tutorial</h1>

<h2>Motto</h2>
<blockquote>
<p>This is the Unix philosophy: Write programs that do one thing and do it well. Write programs to work together. Write programs to handle text streams, because that is a universal interface.</p>
<p>Bell Laboratories. M. D. McIlroy, E. N. Pinson, and B. A. Tague.
“Unix Time-Sharing System Forward”. <em>The Bell System Technical
Journal</em> 1978. <strong>57</strong> (6, part 2). p. 1902.</p>
</blockquote>
<h2>What is <tt>yacite</tt></h2>
<h2>What is <tt>yacite</tt> not</h2>
<h2>Example 1: Creating HTML list of your publications</h2>
<ol>
<li>
<p>Open a terminal emulator and type the following commands on the shell
prompt</p>
<pre><code>mkdir yacite_sandbox
cd yacite_sandbox
</code></pre>
<p>This creates a new directory.</p>
</li>
<li>
<p>You will need a BibTeX ('*.bib') database file containing your publications.
    You can download it from a bibliographic database like Scopus of Web of
    Science. Save the file (let us call it <code>mypubs.bib</code>) in the
    <code>yacite_sandbox</code> directory you created.</p>
</li>
<li>
<p>Go back to the shell prompt (the current directory should be <code>yacite
    sandbox</code> and type the following command </p>
<pre><code>bib2yaml mypubs.bib
</code></pre>
<p>This command prints on its standard output a series of records in YAML
format, we call this <em>a YAML stream</em>. A YAML stream consists of a sequence
of records that look like this:</p>
<pre><code>authors: ['Jenča, Gejza']
doi: 10.1007/s00500-012-0901-x
endpage: 47
grants: VEGA G-2/0059/12, VEGA G-1/0297/11, APVV-0073-10, APVV-0178-11
issn: 1432-7643
issue: 1
journal: Soft Computing
keywords: Effect algebra; Lattice effect algebra; Compatibility center
publisher: Springer-Verlag
startpage: 45
tags: [zpub, sci, cc, scopus]
title: Congruences generated by ideals of the compatibility center of lattice efect algebras
type: article
url: http://dx.doi.org/10.1007/s00500-012-0901-x
volume: 17
year: 2013
</code></pre>
<p>The records in the YAML stream are separated by triple minus <code>---</code>. </p>
<p>Unlike BibTeX, YAML is a popular way to represent data in the current world of
computing. Probably in every programming language, there is a library to
read and write YAML data. Unlike other serialization formats (like
XML), the YAML format was designed to be both human-readable and
human-editable. It can be edited using any text editor.</p>
</li>
<li>
<p>What we want to do now is to convert a YAML stream into a HTML document.
    This is accomplished using a <em>template</em>. A HTML template is a HTML file
    containing special non-HTML control sequences 
    representing variables, loops, conditions
    etc. <code>yacite</code> uses the jinja2 template language.</p>
<p>The templates are kept in a separate directory. Create the
directory on the command prompt:</p>
<pre><code>mkdir templates
</code></pre>
<p>To keep things simple, we shall create a very simple template. Open your
favorite text editor and type in the following jinja2 code.</p>
<pre><code>&lt;html&gt;
&lt;body&gt;
&lt;h1&gt;List of publications&lt;/h1&gt;
&lt;ol&gt;
# for rec in records:
&lt;li&gt;
{{  rec.authors|join(", ") }}
&lt;em&gt;{{rec.title}}&lt;/em&gt;,
{{rec.journal}},
&lt;strong&gt;{{rec.volume}}&lt;/strong&gt;
({{rec.year}})
{{rec.startpage}}-{{rec.endpage}}
&lt;/li&gt;
# endfor
&lt;/ol&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p>This is pretty much self explanatory. The jinja2 commands start with <code>#</code>.
The variables are enclosed in double curly brackets. The construction</p>
<pre><code>{{  rec.authors|join(", ") }}
</code></pre>
<p>means that the authors should be separated by a comma and a space.</p>
</li>
<li>
<p>Save the template under some name, let us say <code>publist.html</code> in the
    <code>templates</code> directory.</p>
</li>
<li>
<p>Type in the following command on the shell prompt.</p>
<pre><code>bib2yaml mypubs.bib | yacite render publist.html
</code></pre>
<p>This is called a <em>pipe sequence</em>. The whole <code>yacite</code> system is based on
pipe sequences. There are two commands at work here. The <code>bib2yaml</code> command
produces a YAML stream as its output. The <code>|</code> sign (called <em>pipe</em>) in the middle connects
the output of the <code>bib2yaml</code> command and with the input of the other
command, <code>yacite render</code>.  The <code>yacite render</code> command reads a YAML stream
on its input, fills in the template, and then produces HTML on its output. </p>
<p>There are more things that <code>yacite render</code> does (like dealing with
citations) but, for the moment, we do not care.</p>
</li>
<li>
<p>Save the resulting HTML into a file using the redirect sign <code>&gt;</code> :</p>
<pre><code>bib2yaml mypubs.bib | yacite render publist.html &gt; mypubs.html
</code></pre>
<p>and open the <code>mypubs.html</code> in you favourite browser. Enjoy the result. </p>
</li>
<li>
<p>Try to alter the
    template; for example, change the <code>&lt;ol&gt;</code> and <code>&lt;/ol&gt;</code> tags to <code>&lt;ul&gt;</code>
    and <code>&lt;/ul&gt;</code>, respectively, and observe the results in <code>mypubs.html</code>. 
    Note that you need to click the reload button in your browser to see the 
    updates in a HTML document.</p>
</li>
<li>
<p>If you need to create a MS Word document, there are some ways how to convert a
    simple HTML document to a <code>.doc</code> file. For example, you can try the
    excellent <code>pandoc</code> document conversion utility. In addition, as I was
    told, MS Word should be capable to load a HTML file and save it as a
    MS Word file.</p>
</li>
</ol>
<h2>Example 2: Filtering the YAML stream</h2>
<ol>
<li>
<p>Try the following command</p>
<pre><code>bib2yaml mypubs.bib | yacite filter 'year == 2012'
</code></pre>
<p>Note that the argument of the <code>yacite filter</code> command in enclosed in
apostrophes. This tell the shell to pass it to the <code>yacite</code> as a
single argument.  The argument <code>year == 2012</code> is a Python expression.</p>
<p>The result should be a filtered YAML stream that contains only the
2012 publications. </p>
<p><strong>Explanation:</strong> The <code>yacite filter</code> command evaluates the <code>year == 2012</code>
expression in the environment given by the record in stream. If the
expression is true, the records is outputted, otherwise it is skipped.</p>
<p>You can now try create a HTML document using <code>yacite render</code>, as in
the previous example.</p>
<pre><code>bib2yaml mypubs.bib | yacite filter 'year == 2012' | yacite render publist.html &gt; mypubs_2012.html
</code></pre>
</li>
<li>
<p>Alter the argument of <code>yacite filter</code> as follows:</p>
<pre><code>bib2yaml mypubs.bib | yacite filter '"the" in title' | yacite render publist.html &gt; mypubs_the.html
</code></pre>
<p>This should create a list of publications containg 'the' as a
substring of the title.</p>
</li>
<li>
<p>You can use conjunction (<code>and</code>), disjunction (<code>or</code>), negation ('not'):</p>
<pre><code>... yacite filter '("Fourier" in title) or "(Laplace" in title)' ...
... yacite filter '(year &gt; 2000) and (year &lt;= 2010)' ...
... yacite filter 'not ("Effect" in keywords)' ...
</code></pre>
<p>Let me remark that the last command is equivalent to much more
readable</p>
<pre><code>... yacite filter '"Effect" not in keywords' ...
</code></pre>
<p>We refer to Python tutorial for more information about Python
expressions.</p>
</li>
</ol>
<h2>Saving the data into database directory</h2>
<h2>Changing the data in the datadir</h2>
<h2>Adding citations</h2>
<h2>Rendering citation lists</h2>
<h2>Rewriting</h2>