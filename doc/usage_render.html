<p><strong>USAGE:</strong> <code>yacite render [-h] [-e EXTRA_YAML] [-k SORT_KEY] [-t TEMPLATE_DIR]template</code></p>
<p><strong>DESCRIPTION:</strong></p>
<p>renders records using a jinja2 template</p>
<p><strong>POSITIONAL ARGUMENTS:</strong></p>
<blockquote>
<p><code>template</code></p>
<blockquote>
<p>template file</p>
</blockquote>
</blockquote>
<p><strong>OPTIONAL ARGUMENTS:</strong></p>
<blockquote>
<p><code>-e, --extra-yaml EXTRA_YAML</code></p>
<blockquote>
<p>additional yaml to pass to template; the data is available as <code>extra</code> </p>
</blockquote>
<p><code>-k, --sort-key SORT_KEY</code></p>
<blockquote>
<p>either fieldname of ~fieldname (for citedby sorting)</p>
</blockquote>
<p><code>-t, --template-dir TEMPLATE_DIR</code></p>
<blockquote>
<p>directory with templates; default: ./templates</p>
</blockquote>
</blockquote><p><strong>implementation:</strong></p>
<blockquote>
<p>The render subcommand  produces the final result: the list of
citations. The data is passed to the jinja2 python library, which uses a
template to produce the list of citations. The jinja2 template language is
documented at the <a href="http://jinja.pocoo.org/docs/templates/">jinja2 site</a> .</p>
<p>Currently, the templates are expected to be in the subdirectory <code>templates</code>
of the current directory. You can use <code>#</code> as the prefix of jinja2 tag lines.
The environment passed to the template consists of
the following data:</p>
<p><code>records</code></p>
<blockquote>
<p>List of dictionaries, includes all of the data in the input YAML
stream. Additionally, the following data are computed/altered:</p>
<ul>
<li>in the input YAML the <code>cites</code> fields is expected to contain list of keys to
     <code>key</code>s of other records. The keys (i.e. strings) are replaced by
     records to the corresponding keys themselves.</li>
<li>in every record, a new <code>citedby</code> field is created. The field is a list of
     records that cite the current record via the <code>cites</code> field.</li>
</ul>
</blockquote>
<p><code>extra</code></p>
<blockquote>
<p>Some python data from the argument of the -e option.</p>
</blockquote>
</blockquote>
<p><strong>example template:</strong></p>
<pre><code># for bibrec in records
# if bibrec.myown
{{ bibrec.authors|join(", ") }}:{{bibrec.title}} {{bibrec.year}}
# if bibrec.citedby
Was cited by:
# for cit in bibrec citedby
  * {{ bibrec.authors|join(", ") }}:{{bibrec.title}} {{bibrec.year}}
# endfor
# endif
# endif
# endfor
</code></pre>
<p><strong> custom filters:</strong></p>
<blockquote>
<p><code>authorsformat(*bst-name-format*)</code></p>
<blockquote>
<p>expects list of authors, rewrites them according to given BibTeX style
name format string. See http://www.tug.org/TUGboat/tb27-2/tb87hufflen.pdf
for details.</p>
</blockquote>
</blockquote>
<p><strong> example usage in a template:</strong></p>
<pre><code>{{ rec.authors|authorsformat("{f. }{vv}{ll{ }}{, jj}")|join(", ") }}
</code></pre>