#!/usr/bin/python

import sys
import argparse

import yacite.command.dummy
import yacite.command.read
import yacite.command.merge
import yacite.command.filter

c_map={
    "dummy":yacite.command.dummy.Dummy,
    "read":yacite.command.read.Read,
    "merge":yacite.command.merge.Merge,
    "filter":yacite.command.filter.Filter,
}

parse=argparse.ArgumentParser()
subparsers=parse.add_subparsers(dest="command",help="The yacite subcommand you want to run")
for cmd in c_map:
    cmd_class=c_map[cmd]
    subpar=subparsers.add_parser(cmd,help=cmd_class.help)
    cmd_class.add_arguments(subpar)
ns=parse.parse_args()
command=c_map[ns.command](ns)
command.execute()





